.\"
.\"	SWISH++
.\"	index.1
.\"
.\"	Copyright (C) 1998  Paul J. Lucas
.\"
.\"	This program is free software; you can redistribute it and/or modify
.\"	it under the terms of the GNU General Public License as published by
.\"	the Free Software Foundation; either version 2 of the License, or
.\"	(at your option) any later version.
.\" 
.\"	This program is distributed in the hope that it will be useful,
.\"	but WITHOUT ANY WARRANTY; without even the implied warranty of
.\"	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\"	GNU General Public License for more details.
.\" 
.\"	You should have received a copy of the GNU General Public License
.\"	along with this program; if not, write to the Free Software
.\"	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
.\"
.\" ---------------------------------------------------------------------------
.\" define code-start macro
.de cS
.sp
.nf
.RS 5
.ft CW
.ta .5i 1i 1.5i 2i 2.5i 3i 3.5i 4i 4.5i 5i 5.5i
..
.\" define code-end macro
.de cE
.ft 1
.RE
.fi
.sp
..
.\" ---------------------------------------------------------------------------
.TH \f3index\f1 1 "May 11, 1999" "SWISH++"
.SH NAME
index \- SWISH++ indexer
.SH SYNOPSIS
.B index
[
.I options
]
.I directory...
.I file...
.SH DESCRIPTION
.B index
is the SWISH++ file indexer.
It indexes the specified files
and files in the specified directories;
files in subdiretories of specified directories are also indexed by default
(unless the
.B \-r
option is given).
Files are indexed either only if their filename extension is among the set
specified with the
.B \-e
option (unless standard input is used; see next paragraph)
or is not among the set specified with the
.B \-E
option.
.PP
If there is a single filename of `\f(CW-\f1', the list of directories and files
to index is instead taken from standard input (one per line).
In this case, filename extensions of files to index need not be explicitly
specified with the
.B \-e
option; all files, regardless of extension
(unless it is among the set specified with the
.B \-E
option), are indexed, i.e.,
.B index
assumes you know what you're doing when specifying filenames.
.PP
In any case, care must be taken not to specify files or subdirectories
in directories that are also specified:
since directories are recursively indexed by default (unless the
.B \-r
option is given),
explicitly specifying a subdirectory or file in a directory that is also
specified will result in those files being indexed more than once.
.PP
.SS Character Entities
Both HTML character and numeric (decimal and hexadecimal) entity references
are converted to their ASCII character equivalents
according to the ISO 8859-1 (Latin 1) character set
before further examination and indexing.
For example, ``r&eacute;sum&#233;'' becomes ``resume'' before indexing.
.SS Word Determination
Stop words, words that occur too frequently or have no information content,
are not indexed.
(There is a default compiled-in set of a few hundred such words.)
Additionally, several heuristics are used to determine which words
should not be indexed.
.PP
First, a word is checked to see if it looks like an acronym.
A word is considered an acronym only if it starts with a capital letter and
is composed exclusively of capital letters, digits, and punctuation symbols,
e.g., ``AT&T.''
If a word looks like an acronym, it is indexed and no further checks are done.
.PP
Second, there are several other checks that are applied.
A word is not indexed if it:
.TP 4
1.
Starts with a capital letter, is of mixed case,
and contains more than a third capital letters, e.g., ``BizZARE.''
.TP
2.
Contains a capital letter other than the first, e.g, ``weIrd.''
.TP
3.
Is less than \f(CWWord_Min_Size\f1 letters.
(Default is 4.)
.TP
4.
Contains less than \f(CWWord_Min_Vowels\f1 vowels.
(Default is 1.)
.TP
5.
Contains more than \f(CWWord_Max_Consec_Same\f1 of the same character
consecutevely (not including digits).
(Default is 2.)
.TP
6.
Contains more than \f(CWWord_Max_Consec_Consonants\f1 consecutive consonants.
(Default is 5.)
.TP
7.
Contains more than \f(CWWord_Max_Consec_Vowels\f1 consecutive vowels.
(Default is 4.)
.TP
8.
Contains more than \f(CWWord_Max_Consec_Puncts\f1 consecutive punctuation
characters.
(Default is 1.)
.SS HTML Files
.B index
does additional processing for HTML files.
(HTML files are recognized as such only if their filename extension is one of:
\f(CWhtm\f1, \f(CWhtml\f1, or \f(CWshtml\f1.)
The additional processing is:
.TP 4
1.
If a matched set of \f(CW<TITLE>\f1 ... \f(CW</TITLE>\f1 tags is found
within the first \f(CWTitle_Lines\f1 lines of the file,
then the text between the tags is stored in the generated index file as the
file's title rather than the file's name.
(Every non-space whitespace character in the title is converted to a space;
leading and trailing spaces are removed.)
.TP
2.
If any HTML element contains a \f(CWTITLE\f1 attribute,
then the words specified as the value of the \f(CWTITLE\f1 attribute
are indexed.
.TP
3.
If an \f(CWAREA\f1, \f(CWIMG\f1, or \f(CWINPUT\f1 element
contains an \f(CWALT\f1 attribute,
then the words specified as the value of the \f(CWALT\f1 attribute
are indexed.
.TP
4.
If a \f(CWMETA\f1 element contains both a \f(CWNAME\f1 and \f(CWCONTENT\f1
attribute, then the words specified
as the value of the \f(CWCONTENT\f1 attribute
are indexed associated with the meta name specified as the value of the
\f(CWNAME\f1 attribute.
(See also the
.B \-m
and
.B \-M
options.)
Meta names can later be queried against specifically using
.BR search (1).
.TP
5.
If a \f(CWTABLE\f1 element contains a \f(CWSUMMARY\f1 attribute,
then the words specified as the value of the \f(CWSUMMARY\f1 attribute
are indexed.
.TP
6.
If an \f(CWOBJECT\f1 element contains a \f(CWSTANDBY\f1 attribute,
then the words specified as the value of the \f(CWSTANDBY\f1 attribute
are indexed.
.TP
7.
All other HTML tags and comments
(anything between \f(CW<\f1 and \f(CW>\f1 characters)
is discarded.
.PP
In compliance with the HTML specification,
any one of no quotes, single quotes, or double quotes may be used
to contain attribute values and attributes can appear in any order.
Values containing whitespace, however, must be quoted.
The specification is vague as to whether whitespace surrounding the \f(CW=\f1
is legal, but
.B index
allows it.
.SH OPTIONS
.TP 18
.BI \-e extension
A filename extension of files to index
.I without
the ``dot.''
Case is significant.
Multiple
.B \-e
options may be specified.
.TP
.BI \-E extension
A filename extension of files
.I not
to index
.I without
the ``dot.''
Case is significant.
Multiple
.B \-E
options may be specified.
.TP
.BI \-f file_max
The maximum number of files a word may occur in
before it is discarded as being too frequent.
The default is infinity.
.TP
.BI \-F file_reserve
Reserve space for this number of files to start.
More space will be allocated as necessary,
but with a slight performace penalty.
The default is 1000.
.TP
.BI \-i index_file
The name of the generated index file.
The default is \f(CWthe.index\f1 in the present working directory.
.TP
.B \-l
Follow symbolic links during indexing.
The default is not to follow them.
.TP
.BI \-m meta_name
The value of a meta \f(CWNAME\f1 attribute
for which the words in the value of the associated \f(CWCONTENT\f1 attribute
should be indexed.
Case is irrelevant.
Multiple
.B \-m
options may be specified.
.IP ""
By default, words in the value of the \f(CWCONTENT\f1 attribute
for all meta names are indexed.
Specifying at least one meta name via this option changes that
so that only the words in the value of the \f(CWCONTENT\f1 attribute
associated with a member of the set of meta names
explicitly specified via one or more
.B \-m
options are indexed.
.TP
.BI \-M meta_name
The value of a meta \f(CWNAME\f1 attribute
for which the words in the value of the associated \f(CWCONTENT\f1 attribute
should not be indexed.
Case is irrelevant.
Multiple
.B \-M
options may be specified.
.TP
.BI \-p percent_max
The maximum percentage of files a word may occur in
before it is discarded as being too frequent.
The detault is 100.
If you want to keep all words regardless,
specify a number greater than 100.
.TP
.B \-r
Do not recursively index the files in subdirectories,
that is: when a directory is encountered,
all the files in that directory are indexed
(modulo the filename extensions specified via the
.B \-e
or
.B \-E
options),
but subdirectories encountered are ignored
and therefore the files contained in them are not indexed.
(This option is most useful when specifying the directories and files to index
via standard input.)
The default is to index the files in subdirectories recursively.
.TP
.BI \-s stop_word_file
The name of a file containing the set of stop-words to use
instead of the built-in set.
Whitespace, including blank lines, and characters starting with \f(CW#\f1
and continuing to the end of the line (comments) are ignored.
.TP
.BI \-S
Dump the built-in set of stop-words to standard output and exit.
.TP
.BI \-t title_lines
The maximum number of lines into a file to look at for HTML \f(CW<TITLE>\f1
tags.
The default is 12.
Larger numbers slow indexing.
.TP
.BI \-v verbosity
Print additional information to standard output during indexing.
The verbosity levels, 0-4, are:
.PP
.RS 18
.PD 0
.TP 4
0
No output is generated (except for errors).
.TP
1
Only run statistics (elapsed time, number of files, word count) are printed.
.TP
2
Directories are printed as indexing progresses.
.TP
3
Directories and files are printed with a word-count for each file.
.TP
4
Same as 3 but also prints all files that are not indexed and why.
.RE
.PD
.RE
.TP 18
.B \-V
Print the version number of
.B SWISH++
to standard output and exit.
.SH EXAMPLES
To index all HTML and text files on a web server:
.cS
cd /home/www/htdocs
index -v3 -e html -e shtml -e txt .
.cE
To index all files not under directories named \f(CWSCCS\f1:
.cS
cd /home/www/htdocs
find . -name SCCS -prune -o -type f -a -print | index -
.cE
.SH EXIT STATUS
Exits with a value of zero only if indexing completed sucessfully;
non-zero otherwise.
.SH CAVEATS
.TP 4
1.
Files without extensions can not be indexed.
.TP
2.
Generated index files are machine-dependent
(size of data types and byte order).
.TP
3.
The character encoding always used is ISO 8859-1 (Latin 1).
Character encodings specified either in \f(CWMETA\f1 elements
or via the \f(CWcharset\f1 attribute in other elements are ignored.
.SH FILES
.PD 0
.TP 14
\f(CWthe.index\f1
default index file name
.PD
.SH SEE ALSO
.BR extract (1),
.BR find (1),
.BR search (1)
.PP
International Standards Organization.
``ISO 8859-1: Information Processing
-- 8-bit single-byte coded graphic character sets
-- Part 1: Latin alphabet No. 1.''
1987.
.PP
\-\-.
``ISO 8879: Information Processing
-- Text and Office Systems
-- Standard Generalized Markup Language (SGML)''
1986.
.PP
Dave Raggett, Arnaud Le Hors, and Ian Jacobs.
``On SGML and HTML: SGML constructs used in HTML: Entities,''
.I HTML 4.0 Specification, section 3.2.3,
World Wide Web Consortium,
April 1998.
.RS
http://www.w3.org/TR/PR-html40/intro/sgmltut.html#h-3.2.3
.RE
.PP
\-\-.
``The global structure of an HTML document: The document head: The title attribute,''
.I HTML 4.0 Specification, section 7.4.3,
World Wide Web Consortium, April 1998.
.RS
http://www.w3.org/TR/REC-html40/struct/global.html#adef-title
.RE
.PP
\-\-.
``The global structure of an HTML document: The document head: Meta data,''
.I HTML 4.0 Specification, section 7.4.4,
World Wide Web Consortium, April 1998.
.RS
http://www.w3.org/TR/PR-html40/struct/global.html#h-7.4.4
.RE
.PP
\-\-.
``Tables: Elements for constructing tables: The TABLE element,''
.I HTML 4.0 Specification, section 11.2.1,
World Wide Web Consortium, April 1998.
.RS
http://www.w3.org/TR/REC-html40/struct/tables.html#adef-summary
.RE
.PP
\-\-.
``Objects, Images, and Applets: Generic inclusion: the OBJECT element,''
.I HTML 4.0 Specification, section 13.3,
World Wide Web Consortium, April 1998.
.RS
http://www.w3.org/TR/REC-html40/struct/objects.html#adef-standby
.RE
.PP
\-\-.
``Objects, Images, and Applets: How to specify alternate text,''
.I HTML 4.0 Specification, section 13.8,
World Wide Web Consortium, April 1998.
.RS
http://www.w3.org/TR/REC-html40/struct/objects.html#h-13.8
.RE
.SH AUTHOR
Paul J. Lucas
.RI < pjl@best.com >
